# 分页响应规范

## 概述

本项目所有后端分页接口和前端处理均采用统一的 `pagination.Page[T]` 格式。本规范定义了前后端交互的分页数据结构。

## 后端标准

### 分页结构定义

所有分页查询的 Service 层返回值及 HTTP 响应体 `data` 字段必须使用以下标准格式：

```go
type Page[T any] struct {
    Records []T   `json:"records"` // 查询数据列表
    Total   int64 `json:"total"`   // 总记录数
    Size    int64 `json:"size"`    // 每页显示条数
    Current int64 `json:"current"` // 当前页
    Pages   int64 `json:"pages"`   // 总页数（必需）
}
```

### JSON 响应示例

```json
{
    "code": 200,
    "msg": "success",
    "data": {
        "records": [
            { "id": 1, "name": "example" }
        ],
        "total": 100,
        "size": 10,
        "current": 1,
        "pages": 10
    }
}
```

### 关键要求

1. **返回类型**：Service 层分页方法必须返回 `*pagination.Page[T]`。
2. **Pages 字段**：总页数字段是必需的，不是可选的。
3. **Records 字段**：数据记录必须在 `Records` 字段中，对应 JSON 的 `records`。

## 前端处理原则

1. **直接返回 API 响应**：前端 `loadData` 方法应直接返回 API 响应，不进行字段转换。
2. **统一使用 records**：不再将 `records` 转换为 `list` 或 `rows`。
3. **BasicTable 处理**：`BasicTable` 组件已统一处理标准格式的分页响应。

### 前端代码示例

```javascript
// 正确示例：直接返回标准格式
const loadData = async (params: any) => {
  return await api.page(params);
};
```
