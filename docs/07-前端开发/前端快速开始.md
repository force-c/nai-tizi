# 前端快速开始指南

## 项目状态

✅ **前端项目已完整搭建完成！**

所有核心功能已实现，包括：
- ✅ 用户认证（登录/登出/Token刷新）
- ✅ **动态路由（支持后台配置菜单生成路由）**
- ✅ 路由管理（路由守卫/权限控制）
- ✅ 状态管理（Pinia + 持久化）
- ✅ HTTP 请求封装（Axios + 拦截器）
- ✅ UI 布局（侧边栏/顶部导航/内容区）

---

## 立即开始

### 1. 安装依赖

```bash
cd web
pnpm install
```

如果没有安装 pnpm，可以使用 npm：

```bash
npm install
```

### 2. 启动开发服务器

```bash
pnpm dev
```

或使用 npm：

```bash
npm run dev
```

启动后访问：**http://localhost:3000**

### 3. 登录测试

确保后端服务已启动（默认端口 8080），然后使用以下测试账号登录：

- **用户名：** admin
- **密码：** admin123

---

## 项目结构

```
web/
├── src/
│   ├── api/              # API 接口定义
│   │   ├── auth/         # 认证相关接口
│   │   └── menu/         # 菜单管理接口
│   ├── assets/           # 静态资源
│   │   └── styles/       # 全局样式
│   ├── layouts/          # 布局组件
│   │   ├── default/      # 默认布局（侧边栏+顶部导航）
│   │   └── blank/        # 空白布局
│   ├── router/           # 路由配置
│   │   └── guards/       # 路由守卫
│   ├── stores/           # 状态管理
│   │   ├── auth.ts       # 认证状态
│   │   ├── user.ts       # 用户权限
│   │   ├── app.ts        # 应用配置
│   │   └── permission.ts # 权限路由
│   ├── types/            # TypeScript 类型
│   │   ├── api.d.ts      # API 类型定义
│   │   ├── menu.d.ts     # 菜单类型定义
│   │   └── global.d.ts   # 全局类型定义
│   ├── utils/            # 工具函数
│   │   └── request.ts    # HTTP 请求封装
│   ├── views/            # 页面组件
│   │   ├── auth/login/   # 登录页
│   │   ├── dashboard/    # 仪表盘
│   │   └── error/        # 错误页面
│   ├── App.vue           # 根组件
│   └── main.ts           # 入口文件
├── .env                  # 环境变量
├── .env.development      # 开发环境变量
├── .env.production       # 生产环境变量
├── package.json          # 项目依赖
├── vite.config.ts        # Vite 配置
└── tsconfig.json         # TypeScript 配置
```

---

## 已实现功能

### ✅ 用户认证
- 密码登录
- Token 自动刷新
- 登出功能
- 登录状态持久化

### ✅ 动态路由系统
- **从后台配置菜单动态生成路由**
- **支持三种菜单类型：目录(M)、菜单(C)、按钮(F)**
- **权限控制（支持通配符）**
- **组件懒加载**
- **自动生成侧边栏菜单**

### ✅ 路由管理
- 路由懒加载
- 路由守卫（认证检查）
- 页面标题自动设置
- 进度条显示（NProgress）

### ✅ 状态管理
- 认证状态（Auth Store）
- 用户权限（User Store）
- 应用配置（App Store）
- **权限路由（Permission Store）**
- 状态持久化（localStorage / sessionStorage）

### ✅ HTTP 请求
- 请求/响应拦截器
- Token 自动添加
- Token 过期自动刷新
- 统一错误处理

### ✅ UI 组件
- 登录页面
- 仪表盘
- **动态侧边栏菜单**
- 顶部导航栏
- 用户下拉菜单
- 404 页面

---

## 配置说明

### 环境变量

编辑 `.env.development` 文件：

```env
# 应用标题
VITE_APP_TITLE=NAI-TIZI 管理后台 (开发)

# API 基础地址（确保与后端服务地址一致）
VITE_API_BASE_URL=http://localhost:8080

# 客户端认证信息（需要与后端配置一致）
VITE_CLIENT_KEY=web_admin
VITE_CLIENT_SECRET=web_admin_secret
```

### 后端客户端配置

确保后端数据库中已创建对应的客户端配置：

```sql
INSERT INTO s_auth_client (
  client_id, 
  client_key, 
  client_secret, 
  grant_types, 
  device_type, 
  timeout, 
  active_timeout, 
  share_token, 
  status
)
VALUES (
  'web_admin', 
  'web_admin', 
  'web_admin_secret', 
  'password,email,refresh', 
  'web', 
  7200, 
  1800, 
  false, 
  '0'
);
```

---

## 开发指南

### 通过后台配置新增业务模块（推荐）

**这是推荐的方式！无需修改前端代码，只需在后台配置菜单即可。**

详见：[动态路由使用示例](./动态路由使用示例.md)

---

## 相关文档

- [前端工程设计方案](../02-架构设计/前端工程设计方案.md)
- [前端动态路由设计方案](../02-架构设计/前端动态路由设计方案.md)
- [动态路由使用示例](./动态路由使用示例.md)
- [后端 API 文档](../04-API文档/)
- [开发规范](../01-规范/)

---

**创建时间：** 2024-12-21  
**当前状态：** ✅ 基础框架已完成，可以开始开发业务功能
